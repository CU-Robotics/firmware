<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: CANManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classCANManager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CANManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The overall manager for the CAN busses and motors.  
 <a href="classCANManager.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="can__manager_8hpp_source.html">can_manager.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a04a57832c9d02d77008664d094f7866a"><td class="memItemLeft" align="right" valign="top"><a id="a04a57832c9d02d77008664d094f7866a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#a04a57832c9d02d77008664d094f7866a">CANManager</a> ()</td></tr>
<tr class="memdesc:a04a57832c9d02d77008664d094f7866a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor. FlexCAN moment for forcing the definition to be in the cpp. <br /></td></tr>
<tr class="separator:a04a57832c9d02d77008664d094f7866a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a735755426743d69a01e8f0a4629fff9e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#a735755426743d69a01e8f0a4629fff9e">CANManager</a> (const <a class="el" href="classCANManager.html">CANManager</a> &amp;copy)=delete</td></tr>
<tr class="memdesc:a735755426743d69a01e8f0a4629fff9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deleted copy and assignment constructors. This class should only ever have one instance.  <a href="classCANManager.html#a735755426743d69a01e8f0a4629fff9e">More...</a><br /></td></tr>
<tr class="separator:a735755426743d69a01e8f0a4629fff9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cd2c63e8a787106133587642e49f186"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCANManager.html">CANManager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#a9cd2c63e8a787106133587642e49f186">operator=</a> (const <a class="el" href="classCANManager.html">CANManager</a> &amp;copy)=delete</td></tr>
<tr class="memdesc:a9cd2c63e8a787106133587642e49f186"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deleted copy and assignment constructors. This class should only ever have one instance.  <a href="classCANManager.html#a9cd2c63e8a787106133587642e49f186">More...</a><br /></td></tr>
<tr class="separator:a9cd2c63e8a787106133587642e49f186"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb783ab842953c4c91fe2389542daa64"><td class="memItemLeft" align="right" valign="top"><a id="acb783ab842953c4c91fe2389542daa64"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#acb783ab842953c4c91fe2389542daa64">~CANManager</a> ()</td></tr>
<tr class="memdesc:acb783ab842953c4c91fe2389542daa64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor, cleans up motor array. <br /></td></tr>
<tr class="separator:acb783ab842953c4c91fe2389542daa64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b94e4ec6b7c2fc834c0a6a665b1f58e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#a1b94e4ec6b7c2fc834c0a6a665b1f58e">init</a> ()</td></tr>
<tr class="memdesc:a1b94e4ec6b7c2fc834c0a6a665b1f58e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the CAN buses and motor array.  <a href="classCANManager.html#a1b94e4ec6b7c2fc834c0a6a665b1f58e">More...</a><br /></td></tr>
<tr class="separator:a1b94e4ec6b7c2fc834c0a6a665b1f58e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af639407db8ef46963b783a3041a79c87"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#af639407db8ef46963b783a3041a79c87">configure</a> (const float motor_info[CAN_MAX_MOTORS][4])</td></tr>
<tr class="memdesc:af639407db8ef46963b783a3041a79c87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dynamically create the motor objects based on config data.  <a href="classCANManager.html#af639407db8ef46963b783a3041a79c87">More...</a><br /></td></tr>
<tr class="separator:af639407db8ef46963b783a3041a79c87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58067501e1a2394d4cdc08daf8e5b1fe"><td class="memItemLeft" align="right" valign="top"><a id="a58067501e1a2394d4cdc08daf8e5b1fe"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#a58067501e1a2394d4cdc08daf8e5b1fe">read</a> ()</td></tr>
<tr class="memdesc:a58067501e1a2394d4cdc08daf8e5b1fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from all busses and distribute them to the correct motors. <br /></td></tr>
<tr class="separator:a58067501e1a2394d4cdc08daf8e5b1fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04879c37638ad607526b00220ee5681a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#a04879c37638ad607526b00220ee5681a">write</a> ()</td></tr>
<tr class="memdesc:a04879c37638ad607526b00220ee5681a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Issue write commands to all motors on each bus.  <a href="classCANManager.html#a04879c37638ad607526b00220ee5681a">More...</a><br /></td></tr>
<tr class="separator:a04879c37638ad607526b00220ee5681a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5868d476822f50392e4bb456b238d13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#aa5868d476822f50392e4bb456b238d13">issue_safety_mode</a> ()</td></tr>
<tr class="memdesc:aa5868d476822f50392e4bb456b238d13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Issue zero torque commands to all motors.  <a href="classCANManager.html#aa5868d476822f50392e4bb456b238d13">More...</a><br /></td></tr>
<tr class="separator:aa5868d476822f50392e4bb456b238d13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc45346042f122d2b56d06311e4913ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#acc45346042f122d2b56d06311e4913ff">write_motor_torque</a> (uint32_t motor_gid, float torque)</td></tr>
<tr class="memdesc:acc45346042f122d2b56d06311e4913ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a torque command to a specific motor given it's global ID.  <a href="classCANManager.html#acc45346042f122d2b56d06311e4913ff">More...</a><br /></td></tr>
<tr class="separator:acc45346042f122d2b56d06311e4913ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc8fe982195072c1bde484559105658b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#abc8fe982195072c1bde484559105658b">write_motor_torque</a> (uint32_t bus_id, uint32_t motor_id, float torque)</td></tr>
<tr class="memdesc:abc8fe982195072c1bde484559105658b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a torque command to a specific motor given it's bus and motor ID.  <a href="classCANManager.html#abc8fe982195072c1bde484559105658b">More...</a><br /></td></tr>
<tr class="separator:abc8fe982195072c1bde484559105658b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af252ed7159b604364f752c912df2e597"><td class="memItemLeft" align="right" valign="top"><a id="af252ed7159b604364f752c912df2e597"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#af252ed7159b604364f752c912df2e597">print_state</a> ()</td></tr>
<tr class="memdesc:af252ed7159b604364f752c912df2e597"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the state of all motors. <br /></td></tr>
<tr class="separator:af252ed7159b604364f752c912df2e597"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33e91e6f73dc980114c02383e26a06f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#a33e91e6f73dc980114c02383e26a06f6">print_motor_state</a> (uint32_t motor_gid)</td></tr>
<tr class="memdesc:a33e91e6f73dc980114c02383e26a06f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the state of a specific motor.  <a href="classCANManager.html#a33e91e6f73dc980114c02383e26a06f6">More...</a><br /></td></tr>
<tr class="separator:a33e91e6f73dc980114c02383e26a06f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bac44027ae78f8cae5d927ca0c7dee0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#a6bac44027ae78f8cae5d927ca0c7dee0">print_motor_state</a> (uint32_t bus_id, uint32_t motor_id)</td></tr>
<tr class="memdesc:a6bac44027ae78f8cae5d927ca0c7dee0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the state of a specific motor.  <a href="classCANManager.html#a6bac44027ae78f8cae5d927ca0c7dee0">More...</a><br /></td></tr>
<tr class="separator:a6bac44027ae78f8cae5d927ca0c7dee0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46c43aacf910cd8734f111ceebd467a8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMotor.html">Motor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#a46c43aacf910cd8734f111ceebd467a8">get_motor</a> (uint32_t motor_gid)</td></tr>
<tr class="memdesc:a46c43aacf910cd8734f111ceebd467a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the underlying motor object by ID.  <a href="classCANManager.html#a46c43aacf910cd8734f111ceebd467a8">More...</a><br /></td></tr>
<tr class="separator:a46c43aacf910cd8734f111ceebd467a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a045ca14af98d2fafe66b06a60fde6f06"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMotor.html">Motor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#a045ca14af98d2fafe66b06a60fde6f06">get_motor</a> (uint32_t bus_id, uint32_t motor_id)</td></tr>
<tr class="memdesc:a045ca14af98d2fafe66b06a60fde6f06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the underlying motor object by bus and motor ID.  <a href="classCANManager.html#a045ca14af98d2fafe66b06a60fde6f06">More...</a><br /></td></tr>
<tr class="separator:a045ca14af98d2fafe66b06a60fde6f06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24147a37b746abccaa190b8e902822d2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMotorState.html">MotorState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#a24147a37b746abccaa190b8e902822d2">get_motor_state</a> (uint32_t motor_gid)</td></tr>
<tr class="memdesc:a24147a37b746abccaa190b8e902822d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the state of a specific motor by global ID.  <a href="classCANManager.html#a24147a37b746abccaa190b8e902822d2">More...</a><br /></td></tr>
<tr class="separator:a24147a37b746abccaa190b8e902822d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25d9b94ff648297df16da076a624ad12"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMotorState.html">MotorState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#a25d9b94ff648297df16da076a624ad12">get_motor_state</a> (uint32_t bus_id, uint32_t motor_id)</td></tr>
<tr class="memdesc:a25d9b94ff648297df16da076a624ad12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the state of a specific motor by bus and motor ID.  <a href="classCANManager.html#a25d9b94ff648297df16da076a624ad12">More...</a><br /></td></tr>
<tr class="separator:a25d9b94ff648297df16da076a624ad12"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ae6de2ab1b2d02ae9745c144975872518"><td class="memItemLeft" align="right" valign="top"><a id="ae6de2ab1b2d02ae9745c144975872518"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#ae6de2ab1b2d02ae9745c144975872518">init_motors</a> ()</td></tr>
<tr class="memdesc:ae6de2ab1b2d02ae9745c144975872518"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify that all motors are online and ready. <br /></td></tr>
<tr class="separator:ae6de2ab1b2d02ae9745c144975872518"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59112ab875cb14b25108dff9ed736a75"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMotor.html">Motor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#a59112ab875cb14b25108dff9ed736a75">distribute_msg</a> (CAN_message_t &amp;msg)</td></tr>
<tr class="memdesc:a59112ab875cb14b25108dff9ed736a75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterates through all the motors and tries to give the message to the correct one.  <a href="classCANManager.html#a59112ab875cb14b25108dff9ed736a75">More...</a><br /></td></tr>
<tr class="separator:a59112ab875cb14b25108dff9ed736a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a8d3f86d95ccfe8ed487bae7c3366a339"><td class="memItemLeft" align="right" valign="top"><a id="a8d3f86d95ccfe8ed487bae7c3366a339"></a>
FlexCAN_T4&lt; CAN1, RX_SIZE_256, TX_SIZE_16 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#a8d3f86d95ccfe8ed487bae7c3366a339">m_can1</a></td></tr>
<tr class="memdesc:a8d3f86d95ccfe8ed487bae7c3366a339"><td class="mdescLeft">&#160;</td><td class="mdescRight">CAN bus 1. <br /></td></tr>
<tr class="separator:a8d3f86d95ccfe8ed487bae7c3366a339"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af359b84414c37c422c8a0f4f2b80be1b"><td class="memItemLeft" align="right" valign="top"><a id="af359b84414c37c422c8a0f4f2b80be1b"></a>
FlexCAN_T4&lt; CAN2, RX_SIZE_256, TX_SIZE_16 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#af359b84414c37c422c8a0f4f2b80be1b">m_can2</a></td></tr>
<tr class="memdesc:af359b84414c37c422c8a0f4f2b80be1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">CAN bus 2. <br /></td></tr>
<tr class="separator:af359b84414c37c422c8a0f4f2b80be1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e6fc8dc5406124ffc92a3b3d971f412"><td class="memItemLeft" align="right" valign="top"><a id="a9e6fc8dc5406124ffc92a3b3d971f412"></a>
FlexCAN_T4&lt; CAN3, RX_SIZE_256, TX_SIZE_16 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#a9e6fc8dc5406124ffc92a3b3d971f412">m_can3</a></td></tr>
<tr class="memdesc:a9e6fc8dc5406124ffc92a3b3d971f412"><td class="mdescLeft">&#160;</td><td class="mdescRight">CAN bus 3. <br /></td></tr>
<tr class="separator:a9e6fc8dc5406124ffc92a3b3d971f412"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67dcdb92e454646024b5a568211bfb8c"><td class="memItemLeft" align="right" valign="top"><a id="a67dcdb92e454646024b5a568211bfb8c"></a>
FlexCAN_T4_Base *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#a67dcdb92e454646024b5a568211bfb8c">m_busses</a> [CAN_NUM_BUSSES] = { &amp;<a class="el" href="classCANManager.html#a8d3f86d95ccfe8ed487bae7c3366a339">m_can1</a>, &amp;<a class="el" href="classCANManager.html#af359b84414c37c422c8a0f4f2b80be1b">m_can2</a>, &amp;<a class="el" href="classCANManager.html#a9e6fc8dc5406124ffc92a3b3d971f412">m_can3</a> }</td></tr>
<tr class="memdesc:a67dcdb92e454646024b5a568211bfb8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of CAN bus objects for easier access. <br /></td></tr>
<tr class="separator:a67dcdb92e454646024b5a568211bfb8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51643060c4e1edad56d1341ba4b9db44"><td class="memItemLeft" align="right" valign="top"><a id="a51643060c4e1edad56d1341ba4b9db44"></a>
std::map&lt; uint32_t, <a class="el" href="classMotor.html">Motor</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#a51643060c4e1edad56d1341ba4b9db44">m_motor_map</a></td></tr>
<tr class="memdesc:a51643060c4e1edad56d1341ba4b9db44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map of motor global ID to generic motor object. <br /></td></tr>
<tr class="separator:a51643060c4e1edad56d1341ba4b9db44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab976b5d2a3346baac61ae11e47d8146c"><td class="memItemLeft" align="right" valign="top"><a id="ab976b5d2a3346baac61ae11e47d8146c"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANManager.html#ab976b5d2a3346baac61ae11e47d8146c">m_motor_init_timeout</a> = 250u</td></tr>
<tr class="memdesc:ab976b5d2a3346baac61ae11e47d8146c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The timeout for motor initialization in milliseconds. Most motors respond within 1-2 ms. <br /></td></tr>
<tr class="separator:ab976b5d2a3346baac61ae11e47d8146c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The overall manager for the CAN busses and motors. </p>
<dl class="section note"><dt>Note</dt><dd>The construction of FlexCAN_T4 objects in of themselves alters processsor state. When these are constructed incorrectly, it will exibit the folowing behavior: reads are fine, the first write will not hang, the processor will lock up some small (seemingly random) amount of time after the write call. Sometimes this even allows lines of code after the first write call to be ran (like prints). Examples of incorrect construction of FlexCAN_T4 objects include: construction in function scope (including main), construction via new (likely, although this is never tested. It is an active issue on FlexCAN_T4's github though), and construction via copy/assignment. This is why we heavily manage the construction of the <a class="el" href="classCANManager.html" title="The overall manager for the CAN busses and motors.">CANManager</a> </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a735755426743d69a01e8f0a4629fff9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a735755426743d69a01e8f0a4629fff9e">&#9670;&nbsp;</a></span>CANManager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CANManager::CANManager </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCANManager.html">CANManager</a> &amp;&#160;</td>
          <td class="paramname"><em>copy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deleted copy and assignment constructors. This class should only ever have one instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">copy</td><td>The <a class="el" href="classCANManager.html" title="The overall manager for the CAN busses and motors.">CANManager</a> object to copy </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af639407db8ef46963b783a3041a79c87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af639407db8ef46963b783a3041a79c87">&#9670;&nbsp;</a></span>configure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CANManager::configure </td>
          <td>(</td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>motor_info</em>[CAN_MAX_MOTORS][4]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dynamically create the motor objects based on config data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motor_info</td><td><a class="el" href="classMotor.html" title="An abstract class holding common information for individual CAN-capable motors.">Motor</a> info array from the config yaml. 2D array holding information in the form: CAN_MAX_MOTORS * [motor_controller_type, per_bus_motor_id, bus_id, motor_type] </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a59112ab875cb14b25108dff9ed736a75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59112ab875cb14b25108dff9ed736a75">&#9670;&nbsp;</a></span>distribute_msg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMotor.html">Motor</a> * CANManager::distribute_msg </td>
          <td>(</td>
          <td class="paramtype">CAN_message_t &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Iterates through all the motors and tries to give the message to the correct one. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The message to distribute </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The motor that successfully read the message or nullptr if no motor read the message </dd></dl>

</div>
</div>
<a id="a045ca14af98d2fafe66b06a60fde6f06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a045ca14af98d2fafe66b06a60fde6f06">&#9670;&nbsp;</a></span>get_motor() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMotor.html">Motor</a> * CANManager::get_motor </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>bus_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>motor_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the underlying motor object by bus and motor ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus_id</td><td>The bus ID of the motor to get </td></tr>
    <tr><td class="paramname">motor_id</td><td>The motor ID on the bus to get </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The motor object if it exists, nullptr if it does not </dd></dl>
<dl class="section note"><dt>Note</dt><dd>You can use the motor's get_type to determine the type of motor and dynamic_cast to the correct motor type </dd></dl>

</div>
</div>
<a id="a46c43aacf910cd8734f111ceebd467a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46c43aacf910cd8734f111ceebd467a8">&#9670;&nbsp;</a></span>get_motor() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMotor.html">Motor</a> * CANManager::get_motor </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>motor_gid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the underlying motor object by ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motor_gid</td><td>The global ID of the motor to get </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The motor object if it exists, nullptr if it does not </dd></dl>
<dl class="section note"><dt>Note</dt><dd>You can use the motor's get_type to determine the type of motor and dynamic_cast to the correct motor type </dd></dl>

</div>
</div>
<a id="a25d9b94ff648297df16da076a624ad12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25d9b94ff648297df16da076a624ad12">&#9670;&nbsp;</a></span>get_motor_state() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMotorState.html">MotorState</a> CANManager::get_motor_state </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>bus_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>motor_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the state of a specific motor by bus and motor ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus_id</td><td>The bus ID of the motor to get the state of </td></tr>
    <tr><td class="paramname">motor_id</td><td>The motor ID on the bus to get the state of </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The state of the motor </dd></dl>

</div>
</div>
<a id="a24147a37b746abccaa190b8e902822d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24147a37b746abccaa190b8e902822d2">&#9670;&nbsp;</a></span>get_motor_state() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMotorState.html">MotorState</a> CANManager::get_motor_state </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>motor_gid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the state of a specific motor by global ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motor_gid</td><td>The global ID of the motor to get the state of </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The state of the motor </dd></dl>

</div>
</div>
<a id="a1b94e4ec6b7c2fc834c0a6a665b1f58e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b94e4ec6b7c2fc834c0a6a665b1f58e">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CANManager::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the CAN buses and motor array. </p>
<dl class="section note"><dt>Note</dt><dd>This can be called multiple times in the event of hot reloading </dd></dl>

</div>
</div>
<a id="aa5868d476822f50392e4bb456b238d13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5868d476822f50392e4bb456b238d13">&#9670;&nbsp;</a></span>issue_safety_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CANManager::issue_safety_mode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Issue zero torque commands to all motors. </p>
<dl class="section note"><dt>Note</dt><dd>This immediately issues a CAN command over the bus </dd></dl>

</div>
</div>
<a id="a9cd2c63e8a787106133587642e49f186"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cd2c63e8a787106133587642e49f186">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCANManager.html">CANManager</a>&amp; CANManager::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCANManager.html">CANManager</a> &amp;&#160;</td>
          <td class="paramname"><em>copy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deleted copy and assignment constructors. This class should only ever have one instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">copy</td><td>The <a class="el" href="classCANManager.html" title="The overall manager for the CAN busses and motors.">CANManager</a> object to copy </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="classCANManager.html" title="The overall manager for the CAN busses and motors.">CANManager</a>&amp; The reference to this object </dd></dl>

</div>
</div>
<a id="a6bac44027ae78f8cae5d927ca0c7dee0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bac44027ae78f8cae5d927ca0c7dee0">&#9670;&nbsp;</a></span>print_motor_state() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CANManager::print_motor_state </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>bus_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>motor_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print the state of a specific motor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus_id</td><td>The bus ID of the motor to print the state of </td></tr>
    <tr><td class="paramname">motor_id</td><td>The motor ID on the bus to print the state of </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a33e91e6f73dc980114c02383e26a06f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33e91e6f73dc980114c02383e26a06f6">&#9670;&nbsp;</a></span>print_motor_state() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CANManager::print_motor_state </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>motor_gid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print the state of a specific motor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motor_gid</td><td>The global ID of the motor to print the state of </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a04879c37638ad607526b00220ee5681a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04879c37638ad607526b00220ee5681a">&#9670;&nbsp;</a></span>write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CANManager::write </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Issue write commands to all motors on each bus. </p>
<dl class="section note"><dt>Note</dt><dd>This issues a CAN command over the bus </dd></dl>

</div>
</div>
<a id="abc8fe982195072c1bde484559105658b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc8fe982195072c1bde484559105658b">&#9670;&nbsp;</a></span>write_motor_torque() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CANManager::write_motor_torque </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>bus_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>motor_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>torque</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a torque command to a specific motor given it's bus and motor ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus_id</td><td>The bus ID of the motor to write to </td></tr>
    <tr><td class="paramname">motor_id</td><td>The motor ID on the bus to write to </td></tr>
    <tr><td class="paramname">torque</td><td>The normalized torque value to write to the motor in the range [-1, 1] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This does not issue a CAN command over the bus </dd></dl>

</div>
</div>
<a id="acc45346042f122d2b56d06311e4913ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc45346042f122d2b56d06311e4913ff">&#9670;&nbsp;</a></span>write_motor_torque() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CANManager::write_motor_torque </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>motor_gid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>torque</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a torque command to a specific motor given it's global ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motor_gid</td><td>The global ID of the motor to write to </td></tr>
    <tr><td class="paramname">torque</td><td>The normalized torque value to write to the motor in the range [-1, 1] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This does not issue a CAN command over the bus </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/sensors/can/<a class="el" href="can__manager_8hpp_source.html">can_manager.hpp</a></li>
<li>src/sensors/can/can_manager.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
